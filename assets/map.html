<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>My Taste Map</title>

  <style>
    html, body, #map {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
  </style>

  <!-- ✅ 카카오 지도 JavaScript SDK -->
  <!-- ❗ 반드시 JavaScript Key를 사용해야 함 -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=28d73fe896f3bb8829428aac2c341cf7"></script>
</head>

<body>
  <div id="map"></div>

  <script>
    // ✅ 지도 초기화 (기본 중심: 강남)
    var map = new kakao.maps.Map(document.getElementById('map'), {
      center: new kakao.maps.LatLng(37.4979, 127.0276),
      level: 4
    });

    // ✅ Flutter에서 호출하는 함수
    // places = Spring → Kakao API → documents 배열
    function drawMarkers(places) {
      for (var i = 0; i < places.length; i++) {
        var p = places[i];

        var marker = new kakao.maps.Marker({
          map: map,
          position: new kakao.maps.LatLng(p.y, p.x)
        });

        // ✅ 마커 클릭 시 가게 이름 표시
        var info = new kakao.maps.InfoWindow({
          content:
            '<div style="padding:5px;font-size:12px;">' +
            p.place_name +
            '</div>'
        });

        kakao.maps.event.addListener(marker, 'click', (function(marker, info) {
          return function() {
            info.open(map, marker);
          }
        })(marker, info));
      }
    }
  </script>
</body>
</html>